import{d as q,r as W,b as v,o as oe,c as _,i as g,j as u,a3 as X,a0 as D,H as y,a4 as H,F as N,k as T,L as ie}from"./DwzrS-n1.js";import{_ as $}from"./DTi4ikUM.js";const le={class:"platformer"},re={class:"platformer__header"},ce={class:"platformer__game-stats"},ue={class:"platformer__stat"},me={class:"platformer__stat"},he=["onClick"],de={key:0,class:"platformer__game-over"},ye=q({name:"PlatformerChaseGame",__name:"PlatformerChaseGame",setup(K){const l=W({lives:3,score:0,gameRunning:!0,invulnerable:!1}),k=v(0),r={HEADER_HEIGHT:60,PLAYER_SPEED:5,ENEMY_SPEED:2,COIN_COUNT:8,WALL_COUNT:6,BORDER_OFFSET:2},x=v(null),Y=v(null),s=v(null),p=v({}),o=W({player:{x:20,y:0},enemy:{x:0,y:0}}),E=v([]),R=v([]),A=v(!1),w=W({x:0,y:0}),V=[{title:"Pause",action:"togglePause"},{title:"Restart",action:"restart"},{title:"Teleport",action:"teleport"}],j={togglePause:()=>{l.gameRunning=!l.gameRunning,P()},restart:()=>{I(),P()},teleport:()=>{se(),P()}},L=v(""),S=v(""),O=v(!1),G=()=>{if(!s.value)return;const e=s.value.clientWidth,t=s.value.clientHeight;E.value=[];for(let n=0;n<r.WALL_COUNT;n++)E.value.push({id:n,x:Math.random()*(e-80),y:Math.random()*(t-120),width:80,height:120})},b=()=>{if(!s.value)return;const e=s.value.clientWidth,t=s.value.clientHeight;R.value=[];for(let n=0;n<r.COIN_COUNT;n++){let a,c,m=!1,h=0;for(;!m&&h<50;)a=Math.random()*(e-40),c=Math.random()*(t-40),m=!E.value.some(i=>a<i.x+i.width+30&&a+20>i.x-30&&c<i.y+i.height+30&&c+20>i.y-30),h++;R.value.push({id:n,x:a,y:c,collected:!1})}},F=()=>{if(!s.value)return;const e=s.value.clientWidth,t=s.value.clientHeight,n=40,a=40,c=20;let m=t/2-r.HEADER_HEIGHT,h=0,i=!1;for(;!i&&h<50;)i=!E.value.some(d=>c<d.x+d.width&&c+n>d.x&&m<d.y+d.height&&m+a>d.y),i||(m=Math.random()*(t-a)),h++;o.player.x=c,o.player.y=m,o.enemy.x=e-60,o.enemy.y=t/3-r.HEADER_HEIGHT},z=()=>{var U;if(!l.gameRunning)return;const e=o.player,t=o.enemy,n=e.x-t.x,a=e.y-t.y,c=Math.sqrt(n*n+a*a);if(c===0)return;const m=n/c*r.ENEMY_SPEED,h=a/c*r.ENEMY_SPEED;let i=t.x+m,d=t.y+h;const C=35,f=((U=Y.value)==null?void 0:U.offsetHeight)||35;s.value&&(i=Math.max(0,Math.min(s.value.clientWidth-C,i)),d=Math.max(0,Math.min(s.value.clientHeight-f,d))),!E.value.some(M=>i<M.x+M.width+5&&i+C>M.x-5&&d<M.y+M.height+5&&d+f>M.y-5)?(o.enemy.x=i,o.enemy.y=d):(Math.abs(n)>Math.abs(a)?d+=a>0?r.ENEMY_SPEED:-2:i+=n>0?r.ENEMY_SPEED:-2,s.value&&(i=Math.max(0,Math.min(s.value.clientWidth-C,i)),d=Math.max(0,Math.min(s.value.clientHeight-f,d))),o.enemy.x=i,o.enemy.y=d)},J=()=>{if(!l.gameRunning)return;const e=o.player,t=o.enemy;Math.sqrt(Math.pow(e.x+20-t.x-17.5,2)+Math.pow(e.y+20-t.y-17.5,2))<35&&!l.invulnerable&&Q(),R.value=R.value.filter(a=>a.collected?!1:Math.sqrt(Math.pow(e.x+20-a.x-10,2)+Math.pow(e.y+20-a.y-10,2))<25?(a.collected=!0,l.score++,!1):!0),l.score>=r.COIN_COUNT&&te()},Q=()=>{if(!x.value)return;const e=Date.now();e-k.value<2e3||(k.value=e,l.lives--,l.invulnerable=!0,x.value.style.opacity="0.5",setTimeout(()=>{l.invulnerable=!1,x.value&&(x.value.style.opacity="1")},2e3),l.lives<=0&&ne())},Z=()=>{G(),F(),b(),B()},ee=()=>{var m;if(!l.gameRunning||!s.value)return;let e=o.player.x,t=o.player.y;const n=((m=x.value)==null?void 0:m.offsetHeight)||40,a=40;(p.value.ArrowUp||p.value.KeyW)&&t>r.BORDER_OFFSET&&(t-=r.PLAYER_SPEED),(p.value.KeyS||p.value.ArrowDown)&&t<s.value.clientHeight-n-r.BORDER_OFFSET&&(t+=r.PLAYER_SPEED),(p.value.KeyA||p.value.ArrowLeft)&&e>r.BORDER_OFFSET&&(e-=r.PLAYER_SPEED),(p.value.KeyD||p.value.ArrowRight)&&e<s.value.clientWidth-a-r.BORDER_OFFSET&&(e+=r.PLAYER_SPEED),!E.value.some(h=>Math.round(e)<Math.round(h.x+h.width)&&Math.round(e+a)>Math.round(h.x)&&Math.round(t)<Math.round(h.y+h.height)&&Math.round(t+n)>Math.round(h.y))&&(o.player.x=e,o.player.y=t)},B=()=>{l.gameRunning&&(ee(),z(),J()),requestAnimationFrame(B)},te=()=>{l.gameRunning=!1,L.value="Victory!",S.value=`All coins collected! Lives remaining: ${l.lives}`,O.value=!0};function ne(){l.gameRunning=!1,L.value="Game over!",S.value=`Coins collected: ${l.score} from ${r.COIN_COUNT}`,O.value=!0}const I=()=>{Object.assign(l,{lives:3,score:0,gameRunning:!0,invulnerable:!1}),F(),O.value=!1,x.value&&(x.value.style.opacity="1"),G(),b()},ae=e=>{if(e.preventDefault(),!s.value)return;const t=s.value.getBoundingClientRect();e.clientX<t.left||e.clientX>t.right||e.clientY<t.top||e.clientY>t.bottom||(w.x=Math.min(e.clientX,window.innerWidth-120),w.y=Math.min(e.clientY,window.innerHeight-120),A.value=!0,document.addEventListener("click",P))},P=()=>{A.value=!1,document.removeEventListener("click",P)},se=()=>{if(!l.gameRunning||!s.value)return;const e=s.value.clientWidth,t=s.value.clientHeight,n=40,a=40;let c=0,m=0,h=!1,i=0;for(;!h&&i<50;){c=Math.random()*(e-n),m=Math.random()*(t-a);const d=Math.sqrt(Math.pow(c+n/2-(o.enemy.x+17.5),2)+Math.pow(m+a/2-(o.enemy.y+17.5),2)),C=E.value.some(f=>c<f.x+f.width&&c+n>f.x&&m<f.y+f.height&&m+a>f.y);h=d>=100&&!C,i++}h&&(o.player.x=c,o.player.y=m)};return oe(()=>{Z(),document.addEventListener("keydown",e=>{p.value[e.code]=!0}),document.addEventListener("keyup",e=>{p.value[e.code]=!1}),document.addEventListener("contextmenu",ae),document.body.addEventListener("contextmenu",e=>e.preventDefault())}),(e,t)=>(g(),_("div",le,[u("div",re,[t[2]||(t[2]=u("h2",null,"ðŸŽ® Chase Game",-1)),u("div",ce,[u("div",ue,[t[0]||(t[0]=u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"red"},[u("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)),u("span",null,D(y(l).lives),1)]),u("div",me,[t[1]||(t[1]=u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"gold"},[u("circle",{cx:"12",cy:"12",r:"10"}),u("circle",{cx:"12",cy:"12",r:"6",fill:"yellow"})],-1)),u("span",null,D(y(l).score),1)])])]),u("div",{ref_key:"gameArea",ref:s,class:"platformer__block"},[u("div",{ref_key:"player",ref:x,class:"platformer__heroic",style:H({left:y(o).player.x+"px",top:y(o).player.y+"px"})},null,4),u("div",{ref_key:"enemy",ref:Y,class:"platformer__enemy",style:H({left:y(o).enemy.x+"px",top:y(o).enemy.y+"px"})},null,4),y(A)?(g(),_("div",{key:0,class:"platformer__contextmenu",style:H({left:y(w).x+"px",top:y(w).y+"px"})},[(g(),_(N,null,T(V,n=>u("button",{key:n.action,class:"platformer__btn-main",onClick:j[n.action]},D(n.title),9,he)),64))],4)):X("",!0),(g(!0),_(N,null,T(y(E),n=>(g(),_("div",{key:n.id,class:"platformer__wall",style:H({left:n.x+"px",top:n.y+"px",width:n.width+"px",height:n.height+"px"})},null,4))),128)),(g(!0),_(N,null,T(y(R),n=>(g(),_("div",{key:n.id,class:"platformer__coin",style:H({left:n.x+"px",top:n.y+"px"})},null,4))),128)),t[3]||(t[3]=u("div",{class:"platformer__instructions"}," Arrows - move | RMB - menu | Collect coins, avoid red! ",-1))],512),y(O)?(g(),_("div",de,[u("h2",null,D(y(L)),1),u("p",null,D(y(S)),1),u("button",{class:"platformer__restart",onClick:I},"Restart")])):X("",!0)]))}}),ve=$(ye,[["__scopeId","data-v-90daed56"]]),pe={class:"main-chase-game"},fe=q({name:"ChaseGame",__name:"chase-game",setup(K){return(l,k)=>{const r=ve;return g(),_("main",pe,[ie(r)])}}}),Ee=$(fe,[["__scopeId","data-v-e9c39797"]]);export{Ee as default};
