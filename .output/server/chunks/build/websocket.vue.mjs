import{a as e,_ as t}from"./server.mjs";import{ref as s,defineComponent as o,mergeProps as a,withCtx as d,createTextVNode as r,unref as n,useSSRContext as l}from"vue";import{ssrRenderAttrs as c,ssrRenderComponent as v,ssrRenderAttr as i,ssrRenderList as u,ssrInterpolate as m}from"vue/server-renderer";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"consola";import"node:url";import"vue-router";const p=o({name:"PageWebsocket",__name:"websocket",__ssrInlineRender:!0,setup(t){const o=s(""),{messages:l,error:p}=function(e){const t=s(null),o=s(!1),a=s([]),d=s(null);return{connect:()=>{t.value=new WebSocket(e),t.value.onopen=()=>{o.value=!0},t.value.onmessage=e=>{a.value=[...a.value,e.data]},t.value.onerror=e=>{d.value=e},t.value.onclose=()=>{o.value=!1}},sendMessage:e=>{t.value&&o.value&&t.value.send(e)},disconnect:()=>{var e;null==(e=t.value)||e.close()},messages:a,isConnected:o,error:d}}("wss://echo.websocket.events");return(t,s,_,h)=>{const b=e;s(`<main${c(a({class:"main-websoсket"},h))} data-v-47e752dd><section class="websocket-hero" data-v-47e752dd><div class="container" data-v-47e752dd><div class="hero__wrapper" data-v-47e752dd><h1 class="hero__title" data-v-47e752dd>`),s(v(b,{to:"https://websocket.org/tools/websocket-echo-server/",external:"",target:"_blank"},{default:d((e,t,s,o)=>{if(!t)return[r(" WebSocket Echo ")];t(" WebSocket Echo ")}),_:1},_)),s(`</h1><div class="hero__actions" data-v-47e752dd><input${i("value",n(o))} placeholder="Type a message" class="hero__input" data-v-47e752dd><button class="hero__btn" data-v-47e752dd>Send</button></div><div class="hero__messages" data-v-47e752dd><h2 data-v-47e752dd>Messages:</h2><ul class="messages__list" data-v-47e752dd>\x3c!--[--\x3e`),u(n(l),(e,t)=>{s(`<li data-v-47e752dd>${m(e)}</li>`)}),s("\x3c!--]--\x3e</ul></div>"),n(p)?s('<div class="hero__error" data-v-47e752dd>WebSocket error!</div>'):s("\x3c!----\x3e"),s("</div></div></section></main>")}}}),_=p.setup;p.setup=(e,t)=>{const s=l();return(s.modules||(s.modules=new Set)).add("pages/features/websocket.vue"),_?_(e,t):void 0};const h=t(p,[["__scopeId","data-v-47e752dd"]]);export{h as default};
//# sourceMappingURL=websocket.vue.mjs.map
