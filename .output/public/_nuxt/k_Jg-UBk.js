import{r as a,j as k,f as b,i as f,c as l,a as t,q as g,b as w,w as x,B as C,C as S,u as v,D as M,F as N,m as V,e as W,o as r,d as y,t as B,_ as D}from"./2cLet2fW.js";function T(m){const e=a(null),o=a(!1),n=a([]),c=a(null),_=()=>{e.value=new WebSocket(m),e.value.onopen=()=>{o.value=!0},e.value.onmessage=s=>{n.value=[...n.value,s.data]},e.value.onerror=s=>{c.value=s},e.value.onclose=()=>{o.value=!1}},u=s=>{e.value&&o.value&&e.value.send(s)},i=()=>{var s;(s=e.value)==null||s.close()};return k(()=>{i()}),{connect:_,sendMessage:u,disconnect:i,messages:n,isConnected:o,error:c}}const E={class:"main-websoсket"},F={class:"websocket-hero"},L={class:"container"},U={class:"hero__wrapper"},j={class:"hero__title"},q={class:"hero__actions"},I={class:"hero__messages"},P={class:"messages__list"},R={key:0,class:"hero__error"},$=b({name:"PageWebsocket",__name:"websocket",setup(m){const e=a(""),{connect:o,sendMessage:n,messages:c,error:_}=T("wss://echo.websocket.events");f(()=>{o()});const u=()=>{e.value.trim()&&(n(e.value),e.value="")};return(i,s)=>{const p=W;return r(),l("main",E,[t("section",F,[t("div",L,[t("div",U,[t("h1",j,[w(p,{to:"https://websocket.org/tools/websocket-echo-server/",external:"",target:"_blank"},{default:x(()=>s[1]||(s[1]=[y(" WebSocket Echo ",-1)])),_:1,__:[1]})]),t("div",q,[C(t("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>M(e)?e.value=d:null),placeholder:"Type a message",class:"hero__input"},null,512),[[S,v(e)]]),t("button",{class:"hero__btn",onClick:u},"Send")]),t("div",I,[s[2]||(s[2]=t("h2",null,"Messages:",-1)),t("ul",P,[(r(!0),l(N,null,V(v(c),(d,h)=>(r(),l("li",{key:`meassage-${h}`},B(d),1))),128))])]),v(_)?(r(),l("div",R,"WebSocket error!")):g("",!0)])])])])}}}),A=D($,[["__scopeId","data-v-47e752dd"]]);export{A as default};
