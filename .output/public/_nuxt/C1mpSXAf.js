import{r as a,B as h,y as b,j as g,c as l,a as o,I as f,b as w,w as x,T as S,U as W,u as v,i as y,H as C,P as M,e as N,o as r,d as V,t as B,_ as T}from"./cbHpo44u.js";function U(m){const s=a(null),t=a(!1),n=a([]),c=a(null),_=()=>{s.value=new WebSocket(m),s.value.onopen=()=>{t.value=!0,console.log("âœ… WebSocket connected")},s.value.onmessage=e=>{n.value=[...n.value,e.data]},s.value.onerror=e=>{c.value=e,console.error("âŒ WebSocket error",e)},s.value.onclose=()=>{t.value=!1,console.log("ðŸ”Œ WebSocket disconnected")}},u=e=>{s.value&&t.value&&s.value.send(e)},i=()=>{var e;(e=s.value)==null||e.close()};return h(()=>{i()}),{connect:_,sendMessage:u,disconnect:i,messages:n,isConnected:t,error:c}}const D={class:"main-websoÑket"},E={class:"websocket-hero"},I={class:"container"},L={class:"hero__wrapper"},P={class:"hero__title"},j={class:"hero__actions"},F={class:"hero__messages"},H={class:"messages__list"},R={key:0,class:"hero__error"},$=b({name:"PageWebsocket",__name:"websocket",setup(m){const s=a(""),{connect:t,sendMessage:n,messages:c,error:_}=U("wss://echo.websocket.events");g(()=>{t()});const u=()=>{s.value.trim()&&(n(s.value),s.value="")};return(i,e)=>{const k=N;return r(),l("main",D,[o("section",E,[o("div",I,[o("div",L,[o("h1",P,[w(k,{to:"https://websocket.org/tools/websocket-echo-server/",external:"",target:"_blank"},{default:x(()=>e[1]||(e[1]=[V(" WebSocket Echo ",-1)])),_:1,__:[1]})]),o("div",j,[S(o("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>y(s)?s.value=d:null),placeholder:"Type a message",class:"hero__input"},null,512),[[W,v(s)]]),o("button",{class:"hero__btn",onClick:u},"Send")]),o("div",F,[e[2]||(e[2]=o("h2",null,"Messages:",-1)),o("ul",H,[(r(!0),l(C,null,M(v(c),(d,p)=>(r(),l("li",{key:`meassage-${p}`},B(d),1))),128))])]),v(_)?(r(),l("div",R,"WebSocket error!")):f("",!0)])])])])}}}),z=T($,[["__scopeId","data-v-47e752dd"]]);export{z as default};
