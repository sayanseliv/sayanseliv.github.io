import{_ as h}from"./B1Nutyga.js";import{b as a,a1 as b,d as g,o as f,c as r,j as o,a3 as w,L as x,M as S,I as W,a5 as M,H as m,p as N,F as C,k as V,i as l,N as y,a0 as B}from"./DwzrS-n1.js";import{_ as L}from"./DWwkEMuy.js";function T(v){const s=a(null),t=a(!1),n=a([]),c=a(null),_=()=>{s.value=new WebSocket(v),s.value.onopen=()=>{t.value=!0,console.log("âœ… WebSocket connected")},s.value.onmessage=e=>{n.value=[...n.value,e.data]},s.value.onerror=e=>{c.value=e,console.error("âŒ WebSocket error",e)},s.value.onclose=()=>{t.value=!1,console.log("ðŸ”Œ WebSocket disconnected")}},i=e=>{s.value&&t.value&&s.value.send(e)},u=()=>{var e;(e=s.value)==null||e.close()};return b(()=>{u()}),{connect:_,sendMessage:i,disconnect:u,messages:n,isConnected:t,error:c}}const D={class:"main-websoÑket"},E={class:"websocket-hero"},F={class:"container"},I={class:"hero__wrapper"},U={class:"hero__title"},j={class:"hero__actions"},H={class:"hero__messages"},P={class:"messages__list"},R={key:0,class:"hero__error"},$=g({name:"PageWebsocket",__name:"websocket",setup(v){const s=a(""),{connect:t,sendMessage:n,messages:c,error:_}=T("wss://echo.websocket.events");f(()=>{t()});const i=()=>{s.value.trim()&&(n(s.value),s.value="")};return(u,e)=>{const p=h;return l(),r("main",D,[o("section",E,[o("div",F,[o("div",I,[o("h1",U,[x(p,{to:"https://websocket.org/tools/websocket-echo-server/",external:"",target:"_blank"},{default:S(()=>e[1]||(e[1]=[y(" WebSocket Echo ",-1)])),_:1,__:[1]})]),o("div",j,[W(o("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>N(s)?s.value=d:null),placeholder:"Type a message",class:"hero__input"},null,512),[[M,m(s)]]),o("button",{class:"hero__btn",onClick:i},"Send")]),o("div",H,[e[2]||(e[2]=o("h2",null,"Messages:",-1)),o("ul",P,[(l(!0),r(C,null,V(m(c),(d,k)=>(l(),r("li",{key:`meassage-${k}`},B(d),1))),128))])]),m(_)?(l(),r("div",R,"WebSocket error!")):w("",!0)])])])])}}}),G=L($,[["__scopeId","data-v-47e752dd"]]);export{G as default};
