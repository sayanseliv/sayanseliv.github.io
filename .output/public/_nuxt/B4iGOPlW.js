import{_ as k}from"./hMrvtFR3.js";import{r as a,a4 as b,d as f,o as g,c as r,e as o,k as w,al as x,w as S,aq as C,ar as M,u as m,O as N,F as V,q as W,b as l,g as y,t as B}from"./D3POZM50.js";import{_ as T}from"./B8AQky74.js";import"./BVGlmBCM.js";function q(v){const e=a(null),t=a(!1),n=a([]),c=a(null),_=()=>{e.value=new WebSocket(v),e.value.onopen=()=>{t.value=!0},e.value.onmessage=s=>{n.value=[...n.value,s.data]},e.value.onerror=s=>{c.value=s},e.value.onclose=()=>{t.value=!1}},u=s=>{e.value&&t.value&&e.value.send(s)},i=()=>{var s;(s=e.value)==null||s.close()};return b(()=>{i()}),{connect:_,sendMessage:u,disconnect:i,messages:n,isConnected:t,error:c}}const D={class:"main-websoсket"},E={class:"websocket-hero"},F={class:"container"},L={class:"hero__wrapper"},U={class:"hero__title"},I={class:"hero__actions"},O={class:"hero__messages"},P={class:"messages__list"},R={key:0,class:"hero__error"},$=f({name:"PageWebsocket",__name:"websocket",setup(v){const e=a(""),{connect:t,sendMessage:n,messages:c,error:_}=q("wss://echo.websocket.events");g(()=>{t()});const u=()=>{e.value.trim()&&(n(e.value),e.value="")};return(i,s)=>{const p=k;return l(),r("main",D,[o("section",E,[o("div",F,[o("div",L,[o("h1",U,[x(p,{to:"https://websocket.org/tools/websocket-echo-server/",external:"",target:"_blank"},{default:S(()=>s[1]||(s[1]=[y(" WebSocket Echo ",-1)])),_:1,__:[1]})]),o("div",I,[C(o("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>N(e)?e.value=d:null),placeholder:"Type a message",class:"hero__input"},null,512),[[M,m(e)]]),o("button",{class:"hero__btn",onClick:u},"Send")]),o("div",O,[s[2]||(s[2]=o("h2",null,"Messages:",-1)),o("ul",P,[(l(!0),r(V,null,W(m(c),(d,h)=>(l(),r("li",{key:`meassage-${h}`},B(d),1))),128))])]),m(_)?(l(),r("div",R,"WebSocket error!")):w("",!0)])])])])}}}),H=T($,[["__scopeId","data-v-47e752dd"]]);export{H as default};
